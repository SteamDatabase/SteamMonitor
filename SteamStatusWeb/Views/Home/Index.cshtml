@using SteamStatus.Models;

@model HomeIndexViewModel


<h1>Steam CM Status</h1>

<div>

    <!--<div class="region">

        <div class="title">
            <span class="flag us"></span>
            Washington
        </div>

        <div class="server">
            <span>123.456.789.123 [somehostname.com]</span>
            <span class="status up">Online</span>
        </div>

        <div class="server">
            <span>123.456.789.124 [somehostname.com]</span>
            <span class="status up">Online</span>
        </div>

    </div>

    <div class="region">

        <div class="title">
            <span class="flag eu"></span>
            Luxemburg
        </div>

        <div class="server">
            <span>123.456.789.321 [someotherhost.com]</span>
            <span class="status up">Online</span>
        </div>

        <div class="server">
            <span>123.456.789.322 [someotherhost.com]</span>
            <span class="status up">Online</span>
        </div>

        <div class="server">
            <span>123.456.789.323 [someotherhost2.com]</span>
            <span class="status down">Offline</span>
        </div>

    </div>-->

    <div class="info">
        Steam is reporting @Model.NumServers CMs. Currently monitoring @Model.Servers.Count of them.
    </div>

    <div class="region">

        <div class="title">
            <span class="flag"></span>
            All Servers
        </div>

        @foreach ( var server in Model.Servers )
        {
            var statusClass = server.IsOnline ? "up" : "down";
            
            <div class="server">

                <span>
                    @server.Server

                    @if ( !string.IsNullOrEmpty( server.Host ) )
                    {
                        <span class="host">[@server.Host]</span>
                    }
                </span>

                <span class="status @statusClass">
                    @if ( server.IsOnline )
                    {
                        @:Online
                    }
                    else
                    {
                        @:Offline
                    }

                    @if ( !string.IsNullOrEmpty( server.Result ) )
                    {
                        <span>(@server.Result)</span>
                    }
                </span>

            </div>
        }
        
    </div>

    <div class="footer">
        Powered by <a href="https://github.com/SteamRE/SteamKit">SteamKit</a> - <a href="https://github.com/VoiDeD/steamstatus">Fork Me</a>
    </div>

</div>